<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Conferidor de Bolão Pro - Mega Sena v2.0</title>
    <style>
        /* Estilização Geral */
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; text-align: center; background-color: #f0f2f5; padding: 20px; color: #333; }
        .container { max-width: 950px; margin: auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); position: relative; }
        
        /* Cabeçalho e Versão */
        .header-meta { font-size: 0.85em; color: #666; text-align: right; margin-bottom: 10px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
        h2 { color: #1a5276; margin-top: 0; text-transform: uppercase; letter-spacing: 2px; }

        /* Seções de Interação */
        .secao-arquivo { background: #f8fbff; padding: 20px; border-radius: 10px; margin-bottom: 20px; border: 2px dashed #3498db; }
        .resultado-input { background: #fffde7; padding: 20px; border-radius: 10px; margin-bottom: 25px; border: 1px solid #f9e79f; }
        
        /* Inputs e Botões */
        input[type="number"] { width: 55px; padding: 10px; margin: 3px; text-align: center; border: 2px solid #bdc3c7; font-weight: bold; border-radius: 6px; font-size: 1.1em; }
        input[type="number"]:focus { border-color: #3498db; outline: none; background-color: #fff; }
        
        button { padding: 12px 24px; cursor: pointer; font-weight: bold; border-radius: 6px; border: none; margin: 5px; transition: all 0.3s ease; text-transform: uppercase; letter-spacing: 1px; }
        .btn-busca { background-color: #3498db; color: white; }
        .btn-conferir { background-color: #27ae60; color: white; width: 100%; max-width: 350px; margin-top: 15px; }
        button:hover { opacity: 0.9; transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        
        /* Tabela */
        table { width: 100%; border-collapse: collapse; margin-top: 20px; background: white; border-radius: 8px; overflow: hidden; }
        th { background-color: #2c3e50; color: white; padding: 15px; text-transform: uppercase; font-size: 0.9em; }
        td { border: 1px solid #ecf0f1; padding: 12px; text-align: center; }
        
        /* Destaques de Acerto */
        .acerto { background-color: #27ae60 !important; color: white !important; font-weight: bold; border-radius: 50%; box-shadow: inset 0 0 5px rgba(0,0,0,0.2); }
        .pontos-col { font-weight: bold; color: #e74c3c; font-size: 1.2em; }
        
        /* Rodapé */
        footer { margin-top: 40px; padding: 20px; color: #7f8c8d; font-size: 0.9em; border-top: 1px solid #ddd; }
        #status-arquivo { font-weight: bold; color: #2980b9; margin-top: 8px; }
        #info-concurso { font-weight: bold; color: #2c3e50; margin: 15px 0; }
    </style>
</head>
<body>

<div class="container">
    <div class="header-meta">
        Versão 2.0 | Atualizado em: 25/02/2026
    </div>

    <h2>SISTEMA CONFERIDOR DE BOLÃO</h2>
    <p style="color: #7f8c8d; margin-top: -10px;">Gestão de Apostas - Grupo Anos 80/90</p>

    <div class="secao-arquivo">
        <strong>1. CARREGAR ARQUIVO DE APOSTAS (.RPC)</strong><br><br>
        <input type="file" id="arquivoRpc" accept=".rpc,.txt">
        <div id="status-arquivo">Aguardando importação de dados...</div>
    </div>

    <div class="resultado-input">
        <strong>2. RESULTADO OFICIAL DO CONCURSO</strong><br><br>
        <input type="number" id="cID" placeholder="Nº" title="Número do Concurso" style="width: 100px;">
        <button class="btn-busca" onclick="buscarResultado()">Buscar na Caixa</button>
        <br><br>
        <div id="inputs-resultado">
            <input type="number" class="res-num" min="1" max="60" placeholder="01">
            <input type="number" class="res-num" min="1" max="60" placeholder="02">
            <input type="number" class="res-num" min="1" max="60" placeholder="03">
            <input type="number" class="res-num" min="1" max="60" placeholder="04">
            <input type="number" class="res-num" min="1" max="60" placeholder="05">
            <input type="number" class="res-num" min="1" max="60" placeholder="06">
        </div>
        <button class="btn-conferir" onclick="conferir()">Processar Conferência</button>
    </div>

    <div id="info-concurso"></div>

    <table>
        <thead>
            <tr>
                <th>Participante</th>
                <th colspan="6">Dezenas Apostadas</th>
                <th>Acertos</th>
            </tr>
        </thead>
        <tbody id="tabela-corpo">
            <tr><td colspan="8" style="color:#999; padding: 40px;">Nenhum dado carregado. Por favor, selecione o arquivo .rpc acima.</td></tr>
        </tbody>
    </table>

    <footer>
        &copy; 2026 - <strong>Reinaldo Pinheiro Consultoria</strong><br>
        Todos os direitos reservados.
    </footer>
</div>

<script>
    /* CONTROLE DE VERSÃO INTERNO
       v2.0 - Adicionado suporte a arquivo .rpc e rodapé corporativo.
    */
    let apostas = [];

    document.getElementById('arquivoRpc').addEventListener('change', function(e) {
        const arquivo = e.target.files[0];
        if (!arquivo) return;

        const leitor = new FileReader();
        leitor.onload = function(e) {
            processarArquivo(e.target.result);
        };
        leitor.readAsText(arquivo);
    });

    function processarArquivo(texto) {
        const linhas = texto.split('\n');
        apostas = [];
        
        for (let i = 1; i < linhas.length; i++) {
            if (linhas[i].trim() === "" || !linhas[i].includes(':')) continue;
            
            const partes = linhas[i].split(':');
            const nome = partes[0].trim();
            const numeros = partes[1].split(',')
                                     .map(n => parseInt(n.trim()))
                                     .filter(n => !isNaN(n));
            
            apostas.push({ nome: nome, num: numeros });
        }
        
        document.getElementById('status-arquivo').innerHTML = `✅ Sucesso: ${apostas.length} apostas carregadas.`;
        renderizarTabela();
    }

    async function buscarResultado() {
        const concurso = document.getElementById('cID').value || 'latest';
        const infoDiv = document.getElementById('info-concurso');
        infoDiv.innerHTML = "Conectando ao servidor...";
        
        try {
            const response = await fetch(`https://loterica.com.br/api/megasena/${concurso}`);
            const data = await response.json();
            
            const inputs = document.querySelectorAll('.res-num');
            data.dezenas.forEach((num, i) => { if(inputs[i]) inputs[i].value = parseInt(num); });
            
            infoDiv.innerHTML = `CONCURSO: ${data.numero} | DATA DO SORTEIO: ${data.data}`;
            conferir();
        } catch (e) {
            infoDiv.innerHTML = "<span style='color:#e74c3c;'>Servidor indisponível. Preencha os números manualmente.</span>";
        }
    }

    function renderizarTabela() {
        const corpo = document.getElementById('tabela-corpo');
        if(apostas.length === 0) return;

        corpo.innerHTML = apostas.map((aposta, index) => `
            <tr>
                <td style="font-weight: bold; color: #2c3e50;">${aposta.nome}</td>
                ${aposta.num.map(n => `<td class="celula-num" data-num="${n}">${n < 10 ? '0'+n : n}</td>`).join('')}
                <td class="pontos-col" id="pontos-${index}">0</td>
            </tr>
        `).join('');
    }

    function conferir() {
        const resultadoOficial = Array.from(document.querySelectorAll('.res-num'))
                                      .map(i => parseInt(i.value))
                                      .filter(n => !isNaN(n));

        if(resultadoOficial.length < 6) {
            alert("Por favor, preencha os 6 números do resultado.");
            return;
        }

        const linhas = document.querySelectorAll('#tabela-corpo tr');
        linhas.forEach((linha, index) => {
            let acertos = 0;
            const celulas = linha.querySelectorAll('.celula-num');